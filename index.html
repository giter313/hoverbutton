<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cyber Neon Grid</title>

<style>
:root {
  color-scheme: light dark;
  --bg: #05080f;
  --card: #0b1220;
  --neon: #22d3ee;
  --neon-soft: rgba(34,211,238,.35);
  --text: #e5e7eb;
  --muted: #9ca3af;
}

body {
  margin: 24px;
  font-family: system-ui, sans-serif;
  background:
    radial-gradient(circle at top, #0a1024, #03040a);
  color: var(--text);
}

h1 {
  font-size: 1.4rem;
  margin-bottom: 16px;
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 16px;
}

.button-card {
  background: linear-gradient(180deg, #0c1430, #060a18);
  border-radius: 12px;
  padding: 14px;
  text-align: center;
  cursor: pointer;
  position: relative;
  border: 1px solid rgba(255,255,255,0.06);
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.02),
    0 0 12px var(--neon-soft);
  transition: transform .15s ease, box-shadow .15s ease;
  white-space: nowrap; /* 絶対改行しない */
  overflow: hidden;
  text-overflow: ellipsis;
}

.button-card:hover {
  transform: translateY(-2px);
  box-shadow:
    0 0 0 1px rgba(255,255,255,0.05),
    0 0 20px var(--neon);
}

.button-card span {
  font-weight: 600;
  font-size: 0.95rem;
}

/* ===== プレビュー ===== */

.preview {
  position: fixed;
  z-index: 9999;
  width: 260px;
  background: var(--card);
  border-radius: 12px;
  padding: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,.5);
  border: 1px solid rgba(255,255,255,.08);
  display: none;
}

.preview video {
  width: 100%;
  border-radius: 8px;
  margin-bottom: 8px;
}

.preview .desc {
  font-size: 13px;
  color: var(--muted);
  line-height: 1.4;
}
</style>
</head>

<body>
<h1>Cyber Button Grid</h1>

<div class="grid" id="grid"></div>

<div class="preview" id="preview">
  <video muted loop playsinline></video>
  <div class="desc"></div>
</div>

<script>
/* ===== JSON データ ===== */
const data = [
  {
    title: "Google Sites 1",
    url: "https://sites.google.com/",
    video: "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",
    description: "Google Sites のページを新しいタブで開きます"
  },
  {
    title: "Google Sites 2",
    url: "https://sites.google.com/",
    video: "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",
    description: "iframe でも安全に遷移します"
  }
];

const grid = document.getElementById("grid");
const preview = document.getElementById("preview");
const previewVideo = preview.querySelector("video");
const previewDesc = preview.querySelector(".desc");

/* ===== ボタン生成 ===== */
data.forEach(item => {
  const btn = document.createElement("div");
  btn.className = "button-card";
  btn.innerHTML = `<span>${item.title}</span>`;

  /* クリック → 新しいタブ */
  btn.addEventListener("click", () => {
    window.open(item.url, "_blank", "noopener");
  });

  /* hover プレビュー */
  btn.addEventListener("pointerenter", e => {
    previewVideo.src = item.video;
    previewVideo.currentTime = 0;
    previewVideo.play().catch(() => {});
    previewDesc.textContent = item.description;
    preview.style.display = "block";
    positionPreview(e.currentTarget);
  });

  btn.addEventListener("pointerleave", () => {
    preview.style.display = "none";
    previewVideo.pause();
  });

  grid.appendChild(btn);
});

/* ===== プレビュー位置制御（見切れ防止） ===== */
function positionPreview(target) {
  const rect = target.getBoundingClientRect();
  const pvRect = preview.getBoundingClientRect();
  const margin = 12;

  let top = rect.top - pvRect.height - margin;
  let left = rect.left + rect.width / 2 - pvRect.width / 2;

  /* 上に出せない場合は下 */
  if (top < margin) {
    top = rect.bottom + margin;
  }

  /* 左右クランプ */
  left = Math.max(
    margin,
    Math.min(left, window.innerWidth - pvRect.width - margin)
  );

  /* 下にはみ出る場合は上に戻す */
  if (top + pvRect.height > window.innerHeight - margin) {
    top = rect.top - pvRect.height - margin;
  }

  preview.style.top = `${top}px`;
  preview.style.left = `${left}px`;
}
</script>
</body>
</html>
